(function(a,b,c){"use strict";function t(b){a(b).contents().each(function(){if(3===this.nodeType&&this.data)return u(this),!0;var b=a(this);return 1!==this.nodeType||b.hasClass(s)&&b.hasClass(s+"-original")&&b.hasClass(s+"-copy")?c:(t(this),!0)})}function u(b){var d,e,f,g,h=b.nodeValue,i=0;if(h&&!/^\s*$/.test(h)){h=h.replace(l,j+"$1").replace(m,"$1"+j).replace(n,j+"$1"+j),d=h.split(o),h=h.replace(k,"");var q=document.createDocumentFragment();i=r.exec(h)[1].length,a.each(d,function(){return(e=this.length)?(p.lastIndex=i+e,f=p.exec(h),g=z(h.substr(i,e+f[1].length)),null!==g&&q.appendChild(g),i=i+e+f[1].length,c):!0}),b.parentNode.replaceChild(q.cloneNode(!0),b)}}function y(b){var c=a(b);c.find("."+s+"-copy").remove(),c.find("."+s+"-original").unwrap().each(function(){a(this).replaceWith(this.childNodes)})}function z(a){if(!a.length)return null;var b=v.cloneNode(!1),c=w.cloneNode(!1),d=x.cloneNode(!1);return b.appendChild(d),b.appendChild(c),c.appendChild(document.createTextNode(a)),d.appendChild(document.createTextNode(a)),b}function A(b,g){(!b.length||b[0].currentStyle)&&b.each(function(){for(var l,b=this,h=g||b.currentStyle["text-shadow"],j=a(b),k=b.parentNode,m=0;(!h||"none"===h)&&"HTML"!==k.nodeName;)h=k.currentStyle["text-shadow"],k=k.parentNode;return h&&"none"!==h?(l=h.split(e),a.each(l,function(){var a=this;if(","==a)return!0;var h,k,l,n,b=a.match(d),e="inherit",g=1;f.test(b[0])?(g=C(b[0]),e=B(b.shift())):f.test(b[b.length-1])&&(g=C(b[b.length-1]),e=B(b.pop())),h=parseFloat(b[0]),k=parseFloat(b[1]),l=b[2]!==c?parseFloat(b[2]):0,n=0==m?j:j.clone().prependTo(j.parent()).addClass(s+"-copy-"+(m+1)).removeClass(s+"-copy-1"),n.css({color:e,left:h-l+"px",top:k-l+"px"}),(1>g||l>0)&&(n[0].style.filter=[1>g?i+"Alpha(opacity="+parseInt(100*g,10)+") ":"",l>0?i+"Blur(pixelRadius="+l+")":""].join("")),m++}),c):!0})}function B(a){var c,b=g.exec(a);return b&&"hsl"===b[1]&&(c=D(b[2],b[3],b[4]),b[2]=c[0],b[3]=c[1],b[4]=c[2]),b?"#"+(1<<24|b[2]<<16|b[3]<<8|b[4]).toString(16).substr(1):a}function C(a){var b=g.exec(a);return b?b[5]!==c?b[5]:1:1}function D(a,b,c){var d,e,f,g,h,i;return b/=100,c/=100,0===b?g=h=i=255*c:(e=.5>=c?c*(b+1):c+b-c*b,d=2*c-e,f=a/360,g=E(d,e,f+1/3),h=E(d,e,f),i=E(d,e,f-1/3)),[g,h,i]}function E(a,b,c){var d;return 0>c?c+=1:c>1&&(c-=1),d=1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a,255*d}var d=/(-?\d+px|(?:hsl|rgb)a?\(.+?\)|#(?:[a-fA-F0-9]{3}){1,2}|0)/g,e=/(,)(?=(?:[^\)]|\([^\)]*\))*$)/,f=/^((?:rgb|hsl)a?|#)/,g=/(rgb|hsl)a?\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?(?:\s*,\s*([\.\d]+))?/,i="progid:DXImageTransform.Microsoft.",j="\u2063",k=/\u2063/g,l=/([\(\[\{])/g,m=/([\)\]\}%\u00b0\!\?\u2014])/g,n=/([\-\u2013])/g,o=/[\s\u2063]/,p=/(\s*)/g,r=/^(\s*)/,s="ui-text-shadow";a.fn.textshadow=function(b,c){"object"!=typeof b||c||(c=b,b=null);var d=c||{},e=d.useStyle===!1?!1:!0,f=d.numShadows||1,g=d.destroy||!1;return g?this.each(function(){y(this)}):this.each(function(){var g,c=a(this),d="."+s+"-copy";g=c.find(d),g.length||(t(this),g=c.find(d)),e?A(g,b):f>1&&g.filter(d+"-1").each(function(){for(var e,g,b=1,c=a(this.parentNode);f>b;)e=d+"-"+(b+1),c.find(e).length||(g=a(this.cloneNode(!0)).addClass(e.substring(1)).removeClass(s+"-copy-1"),c.prepend(g)),b++})})};var v=a('<span class="'+s+'" />')[0],w=a('<span class="'+s+'-original" />')[0],x=a('<span class="'+s+"-copy "+s+'-copy-1" />')[0]})(jQuery,this);